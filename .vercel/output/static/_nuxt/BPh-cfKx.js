import{g as F,r as n,B as P,C as R,D as V,c as h,a as u,b as $,z as p,l,t as A,A as E,o as s}from"./BG_ufDYK.js";import M from"./2WT38eci.js";import O from"./jYVCxHsm.js";import q from"./-lrTF3vZ.js";import L from"./BJE9sMWU.js";import j from"./DW9J2JH7.js";import J from"./DbZQlNYz.js";import Y from"./16g4ar0t.js";import"./CTsZQ131.js";import"./B-dksMZM.js";import"./2dOUpm6k.js";import"./BDTl4M3S.js";import"./B19IICWT.js";import"./BMw1fHYW.js";import"./S_emI7nY.js";import"./BoNa0yMP.js";import"./BJ9K3oKP.js";import"./DpLtLPyT.js";import"./CxWaaTu-.js";import"./tGO6p-5X.js";import"./1smgdg8n.js";import"./BUl_NYnN.js";import"./VhfJLBIJ.js";import"./DAb6qm3D.js";import"./BPiViQY3.js";import"./D0yW6wup.js";import"./Duv_oGhX.js";import"./BpcaT2ZQ.js";import"./DR8X4Am3.js";import"./bBC2Q6DK.js";import"./DJKyISbC.js";const z={class:"min-h-screen"},G={class:"flex items-start justify-center px-4 py-8"},K={class:"w-full max-w-[1200px] rounded-xl shadow-sm bg-white p-8"},U={class:"flex items-center gap-4 mb-6"},H={style:{"font-family":"Geist, sans-serif","font-weight":"600","font-size":"24px","line-height":"32px","letter-spacing":"-0.6px",color:"#0B3947"}},g="visa_application_data",Te=F({__name:"visa-application",setup(Q,{expose:x}){const d=R(),D=E(),a=n(1),m=n(""),r=n(""),i=n({}),o=n({}),v=n({}),c=n({}),f=()=>{const e=a.value<=1?"step-1":a.value<=3?"step-2":"step-3";D.push({query:{...d.query,step:e}})},k=()=>{const e={step:a.value,tripData:i.value,travelersData:o.value,passportData:v.value,processingData:c.value,nationalityCountry:m.value,destinationCountry:r.value};localStorage.setItem(g,JSON.stringify(e)),console.log("Saved to localStorage:",e)},w=()=>o.value.travelers?o.value.travelers.map(e=>`${e.firstName} ${e.lastName}`.trim()||"John Doe"):[],C=()=>{const e={"180-single":{validity:"180 days after issued",maxStay:"30 days per entry",entries:"Single entry"},"180-multiple":{validity:"180 days after issued",maxStay:"30 days per entry",entries:"Multiple entry"},"90-single":{validity:"90 days after issued",maxStay:"30 days per entry",entries:"Single entry"}};return e[i.value.visaType]||e["180-single"]};P(()=>{m.value=d.query.from||"Pakistan",r.value=d.query.to||"Morocco";const e=localStorage.getItem(g);if(e)try{const t=JSON.parse(e);a.value=t.step||1,i.value=t.tripData||{},o.value=t.travelersData||{},v.value=t.passportData||{},c.value=t.processingData||{},t.nationalityCountry&&(m.value=t.nationalityCountry),t.destinationCountry&&(r.value=t.destinationCountry),console.log("Restored data from localStorage:",t)}catch(t){console.error("Failed to restore data from localStorage:",t)}f()}),V(a,()=>{f(),k()});const B=()=>{a.value>1&&a.value--},N=e=>{i.value={...e,applicants:parseInt(e.applicants)},a.value=2,console.log("Step 1 data (Trip Info):",e)},I=e=>{o.value=e,a.value=3,console.log("Step 2 data (Personal Details):",e)},T=e=>{v.value=e,a.value=4,console.log("Step 3 data (Passport Details):",e)},_=e=>{c.value=e,a.value=5,console.log("Step 4 data (Processing Time):",e)},b=e=>{console.log("Payment completed:",e);const t={tripInfo:i.value,personalDetails:o.value,passportDetails:v.value,processingInfo:c.value,paymentInfo:e};console.log("Complete Application Data:",t),alert("Payment successful! Your visa application has been submitted."),S()},S=()=>{localStorage.removeItem(g),console.log("Cleared saved data")};return x({clearSavedData:S}),(e,t)=>(s(),h("div",z,[u("div",G,[u("div",K,[u("div",U,[a.value>1?(s(),h("button",{key:0,onClick:B,class:"flex items-center justify-center w-8 h-8 rounded-full border transition-colors hover:bg-gray-50",style:{"border-color":"#E5E7EB"},type:"button"},[...t[4]||(t[4]=[u("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{d:"M12.5 15L7.5 10L12.5 5",stroke:"#0B3947","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):l("",!0),u("h1",H,A(a.value===5?"Review you order":`Apply now for your ${r.value} e VISA`),1)]),$(M,{"current-step":a.value},null,8,["current-step"]),a.value===1?(s(),p(O,{key:0,destination:r.value},null,8,["destination"])):l("",!0),a.value===1?(s(),p(q,{key:1,nationality:m.value,destination:r.value,onNext:N},null,8,["nationality","destination"])):l("",!0),a.value===2?(s(),p(L,{key:2,destination:r.value,"initial-traveler-count":i.value.applicants,"initial-travelers-data":o.value.travelers,onNext:I,onBack:t[0]||(t[0]=y=>a.value=1)},null,8,["destination","initial-traveler-count","initial-travelers-data"])):l("",!0),a.value===3?(s(),p(j,{key:3,destination:r.value,"traveler-count":o.value.travelers?.length||0,"initial-passport-data":v.value.passportDetails,onNext:T,onBack:t[1]||(t[1]=y=>a.value=2)},null,8,["destination","traveler-count","initial-passport-data"])):l("",!0),a.value===4?(s(),p(J,{key:4,destination:r.value,"traveler-count":o.value.travelers?.length||0,"government-fee":(o.value.travelers?.length||0)*3667.16,onNext:_,onBack:t[2]||(t[2]=y=>a.value=3)},null,8,["destination","traveler-count","government-fee"])):l("",!0),a.value===5?(s(),p(Y,{key:5,destination:r.value,travelers:w(),"government-fee":(o.value.travelers?.length||0)*3667.16,"processing-fee":c.value.processingFee||0,"visa-details":C(),onNext:b,onBack:t[3]||(t[3]=y=>a.value=4)},null,8,["destination","travelers","government-fee","processing-fee","visa-details"])):l("",!0)])])]))}});export{Te as default};
