import{g as N,r as f,m as C,c as w,b as o,w as r,o as E,a as n,d as p,t as P,n as S}from"./BG_ufDYK.js";import{_ as M}from"./BPiViQY3.js";import O from"./D0yW6wup.js";import B from"./Duv_oGhX.js";import I from"./BpcaT2ZQ.js";import U from"./DR8X4Am3.js";import _ from"./bBC2Q6DK.js";import i from"./B19IICWT.js";import q from"./CTsZQ131.js";import k from"./DJKyISbC.js";import"./B-dksMZM.js";import"./2dOUpm6k.js";const T={class:"relative"},j={class:"flex gap-4"},Y=N({__name:"PaymentModal",props:{isOpen:{type:Boolean},amount:{}},emits:["close","success"],setup(m,{emit:y}){const c=m,u=y,s=f(!1),d=f(!1),a=C({cardholderName:"",expiryDate:"",cvv:"",cardNumber:""}),g=l=>{let t=l.target.value.replace(/\s/g,"").replace(/\D/g,"");const V=t.match(/.{1,4}/g)?.join(" ")||t;a.cardNumber=V},v=l=>{let t=l.target.value.replace(/\D/g,"");t.length>=2&&(t=t.slice(0,2)+"/"+t.slice(2,4)),a.expiryDate=t},x=l=>{const e=l.target;a.cvv=e.value.replace(/\D/g,"")},h=l=>{!l&&!s.value&&u("close")},b=async()=>{s.value=!0;try{await new Promise(e=>setTimeout(e,2e3));const l={cardholderName:a.cardholderName,cardNumberLast4:a.cardNumber.slice(-4),amount:c.amount,timestamp:new Date().toISOString()};a.cardholderName="",a.expiryDate="",a.cvv="",a.cardNumber="",d.value=!0}catch(l){console.error("Payment failed:",l),alert("Payment failed. Please try again.")}finally{s.value=!1}},D=()=>{d.value=!1,u("close"),u("success",{cardholderName:a.cardholderName,amount:c.amount,timestamp:new Date().toISOString()})};return(l,e)=>(E(),w("div",null,[o(O,{open:m.isOpen&&!d.value,"onUpdate:open":h},{default:r(()=>[o(B,{class:"w-[440px]"},{default:r(()=>[o(I,null,{default:r(()=>[o(U,null,{default:r(()=>[...e[4]||(e[4]=[p("Card Details",-1)])]),_:1}),o(_,null,{default:r(()=>[...e[5]||(e[5]=[p(" Add the card details below ",-1)])]),_:1})]),_:1}),n("form",{onSubmit:S(b,["prevent"]),class:"space-y-4"},[n("div",T,[o(i,{modelValue:a.cardholderName,"onUpdate:modelValue":e[0]||(e[0]=t=>a.cardholderName=t),type:"text",placeholder:"Cardholder name",required:"",class:"pr-20 h-12",style:{border:"1px solid #1ECE84"}},null,8,["modelValue"]),e[6]||(e[6]=n("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2"},[n("img",{src:M,alt:"Stripe",class:"h-6",style:{width:"auto"}})],-1))]),n("div",j,[o(i,{modelValue:a.expiryDate,"onUpdate:modelValue":e[1]||(e[1]=t=>a.expiryDate=t),type:"text",placeholder:"MM/YY",required:"",maxlength:"5",onInput:v,class:"flex-1 h-12",style:{border:"1px solid #1ECE84"}},null,8,["modelValue"]),o(i,{modelValue:a.cvv,"onUpdate:modelValue":e[2]||(e[2]=t=>a.cvv=t),type:"text",placeholder:"CVV",required:"",maxlength:"4",onInput:x,class:"flex-1 h-12",style:{border:"1px solid #1ECE84"}},null,8,["modelValue"])]),o(i,{modelValue:a.cardNumber,"onUpdate:modelValue":e[3]||(e[3]=t=>a.cardNumber=t),type:"text",placeholder:"Card number",required:"",maxlength:"19",onInput:g,class:"h-12",style:{border:"1px solid #1ECE84"}},null,8,["modelValue"]),o(q,{type:"submit",class:"w-full",style:{height:"36px","border-radius":"6px",padding:"8px 24px","background-color":"#1ECE84"},disabled:s.value},{default:r(()=>[p(P(s.value?"Processing...":`Pay PKR ${m.amount.toFixed(2)}`),1)]),_:1},8,["disabled"])],32)]),_:1})]),_:1},8,["open"]),o(k,{"is-open":d.value,onClose:D},null,8,["is-open"])]))}}),X=Object.assign(Y,{__name:"VisaPaymentModal"});export{X as default};
